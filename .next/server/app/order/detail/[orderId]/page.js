(()=>{var e={};e.id=445,e.ids=[445],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},25533:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>l.a,__next_app__:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>n});var a=t(70260),r=t(28203),d=t(25155),l=t.n(d),i=t(67292),o={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);t.d(s,o);let n=["",{children:["order",{children:["detail",{children:["[orderId]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,16310)),"D:\\NextJS\\medical dashboard\\medical-clinic\\src\\app\\order\\detail\\[orderId]\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,18991)),"D:\\NextJS\\medical dashboard\\medical-clinic\\src\\app\\order\\detail\\layout.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(t.bind(t,71354)),"D:\\NextJS\\medical dashboard\\medical-clinic\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,19937,23)),"next/dist/client/components/not-found-error"],metadata:{icon:[async e=>(await Promise.resolve().then(t.bind(t,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],c=["D:\\NextJS\\medical dashboard\\medical-clinic\\src\\app\\order\\detail\\[orderId]\\page.tsx"],m={require:t,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.RouteKind.APP_PAGE,page:"/order/detail/[orderId]/page",pathname:"/order/detail/[orderId]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:n}})},96538:(e,s,t)=>{Promise.resolve().then(t.bind(t,16310))},64994:(e,s,t)=>{Promise.resolve().then(t.bind(t,90264))},90264:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>B});var a=t(45512),r=t(39400),d=t(32323),l=t(54716),i=t(55669),o=t(94639),n=t(44165),c=t(57741),m=t(37713);let p=(0,m.J1)`
mutation UpdateOrderItemsStatusForShop($order_id: uuid!, $shop_id: uuid!, $status: String!) {
  update_order_items(
    where: { order_id: { _eq: $order_id }, shop_id: { _eq: $shop_id } },
    _set: { status: $status }
  ) {
    affected_rows
  }
}
`;var x=t(95631);let u=()=>{let[e,{loading:s,error:t}]=(0,x.n)(p);return{updateOrderItemsStatus:async s=>{try{let t=await e({variables:s});return t?.data?.update_order_items.affected_rows}catch(e){throw console.log("Error updating order items status:",e),e}},loadingUpdateOrderItems:s,errorUpdateOrderItems:t}};var f=t(68502),h=t(39252),g=t(23005),j=t(58009),N=t(98755),v=t(24849),w=t(62383),b=t(94577),y=t(82281);let _=({options:e,setCategory:s,label:t})=>{let[d,l]=j.useState(!1),[i,o]=j.useState(""),n=j.useRef(null);return(0,a.jsxs)(b.AM,{open:d,onOpenChange:l,children:[(0,a.jsx)(b.Wv,{className:"w-full",asChild:!0,children:(0,a.jsxs)(r.$,{ref:n,variant:"outline",role:"combobox","aria-expanded":d,className:"w-full justify-between text-white bg-secondary_color",children:[i?e.find(e=>e.id===i)?.name:t,(0,a.jsx)(N.A,{color:"white",size:20})]})}),(0,a.jsx)(b.hl,{style:{width:n.current?`${n.current.offsetWidth}px`:"auto"},className:"p-0",children:(0,a.jsxs)(w.uB,{children:[(0,a.jsx)(w.G7,{placeholder:"Search option..."}),(0,a.jsxs)(w.oI,{children:[(0,a.jsx)(w.xL,{children:"No option found."}),(0,a.jsx)(w.L$,{children:e.map(e=>(0,a.jsxs)(w.h_,{id:e.id,onSelect:()=>{o(e.id),l(!1),s(e.value)},children:[(0,a.jsx)(v.A,{className:(0,y.A)("mr-2 h-4 w-4",i===e.id?"opacity-100":"opacity-0")}),e.name]},e.id))})]})]})})]})};var k=t(58184),S=t(41680);let C=(0,S.A)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),P=(0,S.A)("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);var A=t(79334);let B=()=>{let{userId:e}=(0,n.F)(),{orderId:s}=(0,A.useParams)(),{shopOrders:t,setFilters:m}=(0,c.vh)(),[p,x]=(0,j.useState)(""),{order:N,refetchOrder:v}=(0,c.kj)(s),{toast:w}=(0,l.dj)(),{orderItems:b}=(0,c.pX)(s),{updateOrderItemsStatus:y}=u(),{tax:S}=(0,c.rj)(),B=S?S.value/100:0,I=t&&t.length>0?t?.[0].shop_total_price:0,{data:R}=(0,k.IT)(i.T,{variables:{id:e}}),L=R?R.users?.[0]:[];(0,j.useEffect)(()=>{m({shop_id:L.shop_id||"",order_id:s})},[m,R]),(0,j.useEffect)(()=>{N&&x(t[0].order_status)},[x,v]);let M=async e=>{x(e);try{await y({order_id:s,shop_id:L.shop_id||"",status:e})&&(v(),w({description:"Order Updated"}))}catch{x(t[0].order_status||""),w({variant:"destructive",description:"Unable to update order status"})}},z=async()=>{x("Cancelled");try{await y({order_id:s,shop_id:L.shop_id||"",status:"Cancelled"})&&(v(),w({description:"Order Updated"}))}catch{x(t[0].order_status||""),w({variant:"destructive",description:"Unable to update order status"})}};return(0,a.jsxs)("section",{className:"w-full flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"w-full min-h-20 flex flex-row items-center gap-2",children:[(0,a.jsx)("div",{className:"h-11 w-11",children:(0,a.jsx)(f.o,{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("div",{className:"text-sm text-muted-foreground",children:"Back to order list"}),(0,a.jsx)("h1",{className:"text-headercolor font-bold text-xl",children:"Order Detail"})]}),(0,a.jsx)("div",{className:"min-w-16 p-2 rounded-md text-sm border ml-10",children:t[0]?.order_status})]}),(0,a.jsxs)("div",{className:"w-full grid grid-cols-8 gap-x-6",children:[(0,a.jsxs)("div",{className:"col-span-6 w-full flex flex-col gap-4",children:[(0,a.jsx)("div",{className:"min-h-20 w-full",children:(0,a.jsx)(h.b,{data:b||[],columns:g.je})}),(0,a.jsxs)("div",{className:"w-full flex flex-col gap-1 p-6 rounded-md border",children:[(0,a.jsx)("h3",{className:"text-lg",children:"Payment Summary"}),(0,a.jsxs)("div",{className:"w-full flex flex-row items-center justify-between mt-5",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Subtotal"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["(",t[0]?.total_items," items)"]})]}),(0,a.jsxs)("span",{className:"text-sm",children:["MMK ",t[0]?.shop_total_price.toLocaleString()]})]}),(0,a.jsxs)("div",{className:"w-full flex flex-row items-center justify-between",children:[(0,a.jsx)("div",{className:"flex flex-row gap-2 items-center",children:(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Delivery"})}),(0,a.jsxs)("span",{className:"text-sm",children:["MMK ",0..toLocaleString()]})]}),(0,a.jsxs)("div",{className:"w-full flex flex-row items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Tax"}),(0,a.jsxs)("span",{className:"text-sm text-muted-foreground",children:["PDV ",S?.value||0,"% (included)"]})]}),(0,a.jsxs)("span",{className:"text-sm",children:["MMK ",(B*I).toLocaleString()]})]}),(0,a.jsx)(d.w,{className:"my-5"}),(0,a.jsxs)("div",{className:"w-full flex flex-row items-center justify-between",children:[(0,a.jsx)("div",{className:"flex flex-row gap-2",children:(0,a.jsx)("span",{className:"text-sm font-semibold",children:"Total Paid By Customer"})}),(0,a.jsxs)("span",{className:"text-sm",children:["MMK ",(0+I+I*B).toLocaleString()]})]})]}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-6",children:[(0,a.jsx)(r.$,{onClick:z,variant:"outline",className:"text-yellow-600",children:"Cancel Order"}),(0,a.jsx)("div",{className:"w-[15rem]",children:(0,a.jsx)(_,{options:o.XQ,setCategory:M,label:t[0]?.order_status||""})})]})]}),(0,a.jsxs)("div",{className:"col-span-2 p-4 rounded-md border w-full flex flex-col gap-4",children:[(0,a.jsx)("h2",{className:"font-semibold text-xl",children:"Customer"}),(0,a.jsx)("span",{className:"text-muted-foreground text-sm",children:t[0]?.username}),(0,a.jsx)(d.w,{className:"my-2"}),(0,a.jsxs)("span",{className:"text-sm",children:[t[0]?.total_items," Order(s)"]}),(0,a.jsx)(d.w,{className:"my-2"}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 items-start",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Contact Info"}),(0,a.jsxs)("div",{className:"flex flex-row gap-4 text-sm mt-3 break-words",children:[(0,a.jsx)(C,{size:17}),N?.user.email]}),(0,a.jsxs)("div",{className:"flex flex-row items-center gap-4 text-sm",children:[(0,a.jsx)(P,{size:17}),N?.user.phone]})]}),(0,a.jsx)(d.w,{className:"my-2"}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Shipping address"}),(0,a.jsx)("span",{className:"text-sm",children:t[0]?.shipping_address})]}),(0,a.jsx)(d.w,{className:"my-2"}),(0,a.jsxs)("div",{className:"flex flex-col items-start gap-2",children:[(0,a.jsx)("h3",{className:"font-semibold",children:"Billing address"}),(0,a.jsx)("span",{className:"text-sm",children:t[0]?.billing_address})]})]})]})]})}},62383:(e,s,t)=>{"use strict";t.d(s,{uB:()=>p,xL:()=>f,L$:()=>h,G7:()=>x,h_:()=>g,oI:()=>u});var a=t(45512),r=t(58009),d=t(85748),l=t(16873),i=t(44195),o=t(28122),n=t(44269);o.bL,o.l9;let c=o.ZL;o.bm;let m=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(o.hJ,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...s}));m.displayName=o.hJ.displayName,r.forwardRef(({className:e,children:s,...t},r)=>(0,a.jsxs)(c,{children:[(0,a.jsx)(m,{}),(0,a.jsxs)(o.UC,{ref:r,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",e),...t,children:[s,(0,a.jsxs)(o.bm,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,a.jsx)(n.A,{className:"h-4 w-4"}),(0,a.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})).displayName=o.UC.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(o.hE,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",e),...s})).displayName=o.hE.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(o.VY,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",e),...s})).displayName=o.VY.displayName;let p=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(d.uB,{ref:t,className:(0,i.cn)("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",e),...s}));p.displayName=d.uB.displayName;let x=r.forwardRef(({className:e,...s},t)=>(0,a.jsxs)("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[(0,a.jsx)(l.A,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),(0,a.jsx)(d.uB.Input,{ref:t,className:(0,i.cn)("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",e),...s})]}));x.displayName=d.uB.Input.displayName;let u=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(d.uB.List,{ref:t,className:(0,i.cn)("max-h-[300px] overflow-y-auto overflow-x-hidden",e),...s}));u.displayName=d.uB.List.displayName;let f=r.forwardRef((e,s)=>(0,a.jsx)(d.uB.Empty,{ref:s,className:"py-6 text-center text-sm",...e}));f.displayName=d.uB.Empty.displayName;let h=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(d.uB.Group,{ref:t,className:(0,i.cn)("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",e),...s}));h.displayName=d.uB.Group.displayName,r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(d.uB.Separator,{ref:t,className:(0,i.cn)("-mx-1 h-px bg-border",e),...s})).displayName=d.uB.Separator.displayName;let g=r.forwardRef(({className:e,...s},t)=>(0,a.jsx)(d.uB.Item,{ref:t,className:(0,i.cn)("relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",e),...s}));g.displayName=d.uB.Item.displayName},94577:(e,s,t)=>{"use strict";t.d(s,{AM:()=>i,Wv:()=>o,hl:()=>n});var a=t(45512),r=t(58009),d=t(18862),l=t(44195);let i=d.bL,o=d.l9,n=r.forwardRef(({className:e,align:s="center",sideOffset:t=4,...r},i)=>(0,a.jsx)(d.ZL,{children:(0,a.jsx)(d.UC,{ref:i,align:s,sideOffset:t,className:(0,l.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",e),...r})}));n.displayName=d.UC.displayName},93793:(e,s,t)=>{"use strict";t.d(s,{A:()=>i});var a=t(45512),r=t(39400),d=t(35668),l=t(79334);t(58009);let i=()=>{let e=(0,l.useRouter)();return(0,a.jsx)("div",{className:"w-full h-full",children:(0,a.jsx)(r.$,{onClick:()=>{e.back()},className:"w-full hover:bg-gray-300 h-full p-2 flex flex-row items-center justify-center rounded-md bg-gray-50 border border-gray-400",children:(0,a.jsx)(d.A,{className:"text-black",size:30})})})}},68502:(e,s,t)=>{"use strict";t.d(s,{o:()=>a.A});var a=t(93793)},16310:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>a});let a=(0,t(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"D:\\\\NextJS\\\\medical dashboard\\\\medical-clinic\\\\src\\\\app\\\\order\\\\detail\\\\[orderId]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"D:\\NextJS\\medical dashboard\\medical-clinic\\src\\app\\order\\detail\\[orderId]\\page.tsx","default")},18991:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>d});var a=t(62740),r=t(8081);function d({children:e}){return(0,a.jsx)(r.A,{children:e})}}};var s=require("../../../../webpack-runtime.js");s.C(e);var t=e=>s(s.s=e),a=s.X(0,[989,266,77,496,435,698,372,182,320,32],()=>t(25533));module.exports=a})();