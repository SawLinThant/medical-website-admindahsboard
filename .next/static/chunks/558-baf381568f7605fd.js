"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[558],{3312:(e,n,r)=>{r.d(n,{$:()=>s,r:()=>u});var t=r(5155),i=r(2115),o=r(4707),d=r(1027),a=r(1567);let u=(0,d.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),s=i.forwardRef((e,n)=>{let{className:r,variant:i,size:d,asChild:s=!1,...l}=e,c=s?o.DX:"button";return(0,t.jsx)(c,{className:(0,a.cn)(u({variant:i,size:d,className:r})),ref:n,...l})});s.displayName="Button"},7079:(e,n,r)=>{r.d(n,{T:()=>u,w:()=>a});var t=r(698),i=r(8247);function o(){let e=(0,t._)(["\n  query getUsersByShopId($shop_id: uuid!) {\n    users(where: { shop_id: { _eq: $shop_id } }) {\n      id\n      username\n      email\n      phone\n      role\n    }\n  }\n"]);return o=function(){return e},e}function d(){let e=(0,t._)(["\n  query getUsersByShopId($id: uuid!) {\n    users(where: { id: { _eq: $id } }) {\n      id\n      username\n      email\n      phone\n      role\n      shop_id\n    }\n  }\n"]);return d=function(){return e},e}let a=(0,i.J1)(o()),u=(0,i.J1)(d())},890:(e,n,r)=>{r.d(n,{E5:()=>F,Jd:()=>L,yT:()=>Q,kj:()=>Z,pX:()=>ee,LG:()=>A,wz:()=>U,C3:()=>V,_y:()=>H,CE:()=>X,vh:()=>Y,lI:()=>W,jt:()=>N,_V:()=>D,rj:()=>en,u8:()=>K});var t=r(8870),i=r(698),o=r(8247);function d(){let e=(0,i._)(["\n  query getTags {\n    tags {\n      id\n      name\n    }\n  }\n"]);return d=function(){return e},e}function a(){let e=(0,i._)(["\n  query getTags($product_id: uuid!) {\n    product_tags(where: { product_id: { _eq: $product_id } }) {\n      id\n      tag_id\n      tag{\n        id\n        name\n      }\n    }\n  }\n"]);return a=function(){return e},e}let u=(0,o.J1)(d()),s=(0,o.J1)(a());function l(){let e=(0,i._)(["\n  query getTags {\n    categories {\n      id\n      name\n    }\n  }\n"]);return l=function(){return e},e}function c(){let e=(0,i._)(["\n  query getTags {\n    shop_categories {\n      id\n      name\n    }\n  }\n"]);return c=function(){return e},e}let _=(0,o.J1)(l()),g=(0,o.J1)(c());function p(){let e=(0,i._)(["\n  query getProducts {\n    cards(order_by: { created_at: desc }) {\n      id\n      name\n      price\n      quantity\n      category {\n        id\n        name\n      }\n      images {\n        id\n        image_url\n        product_id\n        product {\n          id\n          name\n        }\n      }\n    }\n  }\n"]);return p=function(){return e},e}function h(){let e=(0,i._)(["\n  query getProducts($id: uuid!) {\n    products(where: { id: { _eq: $id } }) {\n      id\n      name\n      price\n      bulk_price\n      quantity\n      description\n      dosage\n      usage\n      storage\n      category_id\n      category{\n        id\n        name\n      }\n    }\n  }\n"]);return h=function(){return e},e}function m(){let e=(0,i._)(["\n  query getFilteredProducts($where: products_bool_exp, $offset: Int, $limit: Int) {\n    products(where: $where, order_by: { created_at: desc }, offset: $offset, limit: $limit) {\n      id\n      name\n      price\n      quantity\n      shop_id\n      category {\n        id\n        name\n      }\n      images {\n        id\n        image_url\n        product_id\n        product {\n          id\n          name\n        }\n      }\n    }\n    products_aggregate(where: $where) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return m=function(){return e},e}(0,o.J1)(p());let f=(0,o.J1)(h()),v=(0,o.J1)(m());var y=r(2115);function b(){let e=(0,i._)(["\n  query getPriceRange {\n    price_ranges(order_by: { start_price: asc }) {\n      id\n      start_price\n      end_price\n    }\n  }\n"]);return b=function(){return e},e}let $=(0,o.J1)(b());function q(){let e=(0,i._)(["\n  query getImages($product_id: uuid!) {\n    images(where: { product_id: { _eq: $product_id } }) {\n      id\n      image_url\n    }\n  }\n"]);return q=function(){return e},e}let w=(0,o.J1)(q());function k(){let e=(0,i._)(["\n  query getShops {\n    shops(order_by: { created_at: desc }) {\n      id\n      name\n      logo\n      category\n      description\n      address\n      phone\n      category_id\n      remark\n      shop_admin_name\n    }\n  }\n"]);return k=function(){return e},e}function I(){let e=(0,i._)(["\n  query getShopById($id: uuid!) {\n    shops_by_pk(id: $id) {\n      id\n      name\n      logo\n      description\n      address\n      phone\n      category_id\n      remark\n      shop_admin_name\n      shop_category {\n        id\n        name\n      }\n    }\n  }\n"]);return I=function(){return e},e}function T(){let e=(0,i._)(["\n  query getShops($where: shops_bool_exp, $offset: Int, $limit: Int) {\n    shops(\n      where: $where\n      order_by: { created_at: desc }\n      offset: $offset\n      limit: $limit\n    ) {\n      id\n      name\n      logo\n      description\n      address\n      phone\n      category_id\n      remark\n      shop_admin_name\n      shop_category {\n        id\n        name\n      }\n    }\n      shops_aggregate(where: $where) {\n        aggregate {\n          count\n        }\n      }\n  }\n"]);return T=function(){return e},e}(0,o.J1)(k());let J=(0,o.J1)(I()),x=(0,o.J1)(T());var S=r(7079);function j(){let e=(0,i._)(["\n  query getImages($shop_id: uuid!) {\n    shop_images(where: { shop_id: { _eq: $shop_id } }) {\n      id\n      image_url\n    }\n  }\n"]);return j=function(){return e},e}let C=(0,o.J1)(j());function P(){let e=(0,i._)(["\n  query GetShopOrders($where: shop_orders_bool_exp, $offset: Int, $limit: Int) {\n    shop_orders(where: $where, offset: $offset, limit: $limit) {\n      order_id\n      user_id\n      username\n      created_date\n      order_status\n      total_price\n      billing_address\n      billing_phone_no\n      total_items\n      shop_total_price\n      payment\n    }\n    shop_orders_aggregate(where: $where) {\n      aggregate {\n        count\n      }\n    }\n  }\n"]);return P=function(){return e},e}function O(){let e=(0,i._)(["\n  query GetOrders($id: uuid!) {\n    orders(where: { id: { _eq: $id } }) {\n      id\n      user_id\n      status\n      created_date\n      updated_date\n      total_price\n      payment_id\n      user {\n        id\n        username\n        email\n        phone\n        delivery_addresses{\n        fistname\n        lastname\n           address\n           phone\n        }\n      }\n    }\n  }\n"]);return O=function(){return e},e}function B(){let e=(0,i._)(["\n  query GetOrderItems($order_id: uuid!) {\n    order_items(where: { order_id: { _eq: $order_id } }) {\n      id\n      order_id\n      product_id\n      quantity\n      price\n      subtotal\n      status\n      shop_id\n      product {\n        id\n        name\n        price\n        bulk_price\n        quantity\n        description\n        images{\n          id\n          image_url\n          product_id\n\n        }\n      }\n    }\n  }\n"]);return B=function(){return e},e}let M=(0,o.J1)(P()),R=(0,o.J1)(O()),z=(0,o.J1)(B());function E(){let e=(0,i._)(["\n  query getTags {\n    taxes {\n      id\n      value\n    }\n  }\n"]);return E=function(){return e},e}let G=(0,o.J1)(E()),N=()=>{let{data:e,loading:n,error:r}=(0,t.IT)(u);return{tags:(null==e?void 0:e.tags)||[],loadingTags:n,error:r}},F=()=>{let{data:e,loading:n,error:r}=(0,t.IT)(_);return{categories:(null==e?void 0:e.categories)||[],loadingCategories:n,error:r}},U=()=>{var e,n;let[r,i]=(0,y.useState)({}),[o,d]=(0,y.useState)(1),[a,u]=(0,y.useState)(10),s=(0,y.useMemo)(()=>(o-1)*a,[o,a]),l=(0,y.useMemo)(()=>{let e={};return r.shop_id&&(e.shop_id={_eq:r.shop_id}),r.name&&(e.name={_ilike:"%".concat(r.name,"%")}),r.category&&(e.category={id:{_eq:r.category}}),r.priceRange&&(e.price={_gte:r.priceRange.start_price,_lte:r.priceRange.end_price}),Object.keys(e).length>0?e:void 0},[r]),{data:c,loading:_,error:g}=(0,t.IT)(v,{variables:{where:l,offset:s,limit:a},fetchPolicy:"network-only"});return{products:(null==c?void 0:c.products)||[],loading:_,error:g,filters:r,setFilters:i,page:o,setPage:d,take:a,setTake:u,totalCount:(null==c?void 0:null===(n=c.products_aggregate)||void 0===n?void 0:null===(e=n.aggregate)||void 0===e?void 0:e.count)||1}},V=()=>{let{data:e,loading:n,error:r}=(0,t.IT)($);return{priceRanges:(null==e?void 0:e.price_ranges)||[],loadingPriceRange:n,error:r}},X=()=>{let{data:e,loading:n,error:r}=(0,t.IT)(g);return{shopCategories:(null==e?void 0:e.shop_categories)||[],loadingShopCategories:n,error:r}},A=e=>{var n;let{data:r,loading:i,error:o,refetch:d}=(0,t.IT)(f,{variables:{id:e},skip:!e});return{product:(null==r?void 0:null===(n=r.products)||void 0===n?void 0:n[0])||null,loadingProduct:i,error:o,refetchProduct:d}},D=e=>{let{data:n,loading:r,error:i}=(0,t.IT)(s,{variables:{product_id:e},skip:!e});return{productTagsById:(null==n?void 0:n.product_tags)||[],tagsById:(null==n?void 0:n.product_tags.map(e=>({id:e.tag.id,name:e.tag.name})))||[],loadingTags:r,error:i}},L=e=>{let{data:n,loading:r,error:i,refetch:o}=(0,t.IT)(w,{variables:{product_id:e},skip:!e});return{images:(null==n?void 0:n.images)||[],loadingImages:r,error:i,refetchImage:o}},Q=e=>{let{data:n,loading:r,error:i,refetch:o}=(0,t.IT)(C,{variables:{shop_id:e},skip:!e});return{images:(null==n?void 0:n.shop_images)||[],loadingImages:r,error:i,refetchImage:o}},H=e=>{let{data:n,loading:r,error:i,refetch:o}=(0,t.IT)(J,{variables:{id:e},skip:!e});return{shop:(null==n?void 0:n.shops_by_pk)||null,loadingShop:r,errorShop:i,refetchShop:o}},K=e=>{var n;let{data:r,loading:i,error:o,refetch:d}=(0,t.IT)(S.w,{variables:{shop_id:e},skip:!e});return{user:(null==r?void 0:null===(n=r.users)||void 0===n?void 0:n[0])||null,loadingUser:i,errorUser:o,refetchUser:d}},W=()=>{var e,n;let[r,i]=(0,y.useState)({}),[o,d]=(0,y.useState)(1),[a,u]=(0,y.useState)(10),s=(0,y.useMemo)(()=>(o-1)*a,[o,a]),l=(0,y.useMemo)(()=>{let e={};return r.name&&(e.name={_ilike:"%".concat(r.name,"%")}),r.shop_category&&(e.shop_category={id:{_eq:r.shop_category}}),Object.keys(e).length>0?e:void 0},[r]),{data:c,loading:_,error:g}=(0,t.IT)(x,{variables:{where:l,offset:s,limit:a},fetchPolicy:"network-only"});return{shops:(null==c?void 0:c.shops)||[],loading:_,error:g,filters:r,setFilters:i,page:o,setPage:d,take:a,setTake:u,totalCount:(null==c?void 0:null===(n=c.shops_aggregate)||void 0===n?void 0:null===(e=n.aggregate)||void 0===e?void 0:e.count)||1}},Y=()=>{var e,n;let[r,i]=(0,y.useState)({}),[o,d]=(0,y.useState)(1),[a,u]=(0,y.useState)(10),s=(0,y.useMemo)(()=>(o-1)*a,[o,a]),l=(0,y.useMemo)(()=>{let e={};return r.shop_id&&(e.shop_id={_eq:r.shop_id}),r.order_id&&(e.order_id={_eq:r.order_id}),r.order_status&&(e.order_status={_eq:r.order_status}),r.payment&&(e.payment={_eq:r.payment}),r.username&&(e.username={_ilike:"%".concat(r.username,"%")}),r.created_date&&(e.created_date={_gte:r.created_date.start_date,_lte:r.created_date.end_date}),Object.keys(e).length>0?e:void 0},[r]),{data:c,loading:_,error:g}=(0,t.IT)(M,{variables:{where:l,offset:s,limit:a},fetchPolicy:"network-only"});return{shopOrders:(null==c?void 0:c.shop_orders)||[],loading:_,error:g,filters:r,setFilters:i,page:o,setPage:d,take:a,setTake:u,totalCount:(null==c?void 0:null===(n=c.shop_orders_aggregate)||void 0===n?void 0:null===(e=n.aggregate)||void 0===e?void 0:e.count)||1}},Z=e=>{var n;let{data:r,loading:i,error:o,refetch:d}=(0,t.IT)(R,{variables:{id:e},skip:!e});return{order:r?null===(n=r.orders)||void 0===n?void 0:n[0]:void 0,loadingOrder:i,error:o,refetchOrder:d}},ee=e=>{let{data:n,loading:r,error:i}=(0,t.IT)(z,{variables:{order_id:e},skip:!e});return{orderItems:n?n.order_items:void 0,loadingOrder:r,error:i}},en=()=>{let{data:e,loading:n,error:r}=(0,t.IT)(G);return{tax:e?e.taxes[0]:void 0,loadingTax:n,error:r}}},1567:(e,n,r)=>{r.d(n,{cn:()=>d,o:()=>a});var t=r(3463),i=r(9795),o=r(7684);function d(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];return(0,i.QP)((0,t.$)(n))}function a(e){try{let n=(0,o.s)(e),r=n.role,t=n.user_id,i=n.email;return{role:r,id:t,email:i}}catch(e){return console.log("error decoding token:",e),null}}}}]);